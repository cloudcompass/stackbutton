<div flex-grow layout="column">
  <!-- Top bar begin -->
  <md-toolbar layout="row" layout-align="space-between stretch">
    <div ui-sref="home.projects" layout="row" layout-align="start center" class="capitalize logo-box" hide-xs>
      <img class="sb-logo detail sb-48px">
      <h1> StackButton</h1>
    </div>

    <!--Mobile only menu button-->
    <md-button class="toolbar-button" hide-gt-xs ng-click="vm.toggleLeftNav()" aria-label="Open Menu">
      <i class="material-icons">menu</i>
    </md-button>

    <!--Top Project Selector -->
    <md-menu layout="row" layout-align="start center">
      <md-button ng-hide="currentProject==null" ng-click="$mdOpenMenu()" style="width:100%"
                 class="md-raised md-primary">
        <span>Project Selector</span>
        <i class="material-icons">arrow_drop_down</i>
      </md-button>
      <md-menu-content>
        <md-menu-item>
          <md-button>Project One</md-button>
        </md-menu-item>
      </md-menu-content>
    </md-menu>
    <!-- end Top Project Selector -->

    <!-- allow white space for project selector -->
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <!-- end allow white space for project selector -->

    <!-- User profile menu -->
    <div layout="row" layout-align="start center">
      <md-menu>
        <md-button ng-click="$mdOpenMenu()" aria-label="Open menu" class="toolbar-button">
          <span class="orig-case" hide-xs>{{ currentUser==null ? 'unknown' : currentUser.username }}</span>
          <i class="material-icons">account_circle</i>
        </md-button>
        <md-menu-content width="3">
          <md-menu-item>
            <md-button ng-click="$mdCloseMenu()" ui-sref="home.profile">Profile</md-button>
          </md-menu-item>
          <md-menu-item>
            <md-button ng-click="logOut()">Log out</md-button>
          </md-menu-item>
        </md-menu-content>
      </md-menu>
    </div>
    <!-- End User profile menu -->

  </md-toolbar>
  <!-- Top bar end -->

  <!-- Left nav begin -->
  <div layout="row" flex>

    <md-sidenav md-is-locked-open="$mdMedia('gt-xs')" md-component-id="leftnav"
                class="md-whiteframe-z2 md-sidenav-left" md-theme="dark" md-swipe-left="vm.toggleLeftNav()">

      <!--Project selector -->
      <div class="fixed-height-widget" md-theme="default" layout="column" ng-hide="currentProject==null">
        <md-toolbar class="md-accent" layout="row" layout-align="space-between center">
           <span style="width:100%" class="md-body-1 capitalize" layout-padding>
             {{currentProject.name}}
           </span>
          <md-button class="toolbar-button" aria-label="Edit project" ui-sref="home.editproject"
                     ng-click="select(project)">
            <i class="dash-widget-topbar-text material-icons">mode_edit</i>
          </md-button>
        </md-toolbar>
        <p layout-padding>
          {{currentProject.description}}
        </p>
      </div>
      <md-divider></md-divider>

      <!-- Menu items -->
      <div layout="column" layout-align="center start" ng-hide="currentProject==null"
           ng-init="Menu=[{name: 'Dashboard',sub1: 'Dashboard 1',sub2: 'Dashboard 2' ,icon: 'add'},{name:'Modules'},{name:'Services'}]">

        <div ng-repeat="item in Menu">
          <md-list>
            <div layout="row" layout-align="space-between center">
              <div class="issue-label" style="background-color:lightgray"></div>
              <md-button>
                <span>{{item.name}}</span>
              </md-button>

              <md-button ng-hide="'{{item.name}}'!='Dashboard'" style="min-width: 1px">
                <i class="material-icons">{{item.icon}}</i>
              </md-button>
            </div>

            <div layout="column" layout-align="center center" ng-hide="'{{item.name}}'!='Dashboard'">
              <div layout="row" layout-align="start stretch">
                <div class="issue-label" style="background-color:gray"></div>
                <md-button>
                  <span>{{item.sub1}}</span>
                </md-button>
              </div>

              <div layout="row" layout-align="start center">
                <div class="issue-label" style="background-color:gray"></div>
                <md-button>
                  <span>{{item.sub2}}</span>
                </md-button>
              </div>
            </div>
        </div>
      </div>
      <!-- end Menu items -->

    </md-sidenav>
    <!-- Left nav end -->


    <!-- Content begin -->
    <div flex-grow layout="row" class="page-content" style="position:relative">
      <!--Inject view-->
      <div flex ng-class="{'hide-xs':vm.showActivities}" ui-view style="overflow:auto;"></div>
      <!-- Drawer Button-->
      <md-button class="toolbar-button md-raised md-primary md-no-ink page-content" aria-label="Open activity feed"
                 style="position:absolute;right:-8px;z-index:10"
                 md-swipe-left="vm.toggleActivityDrawer()" ng-click="vm.toggleActivityDrawer()">
        <i class="material-icons">{{vm.showActivities==true ? 'keyboard_arrow_right':'notifications'}}</i>
      </md-button>
    </div>
    <!-- Content end -->


    <!-- Right pop-out begin-->
    <md-sidenav md-component-id="activitydrawer" md-is-locked-open="$mdMedia('gt-xs')&&vm.showActivities"
                class="md-whiteframe-z2 md-sidenav-right" md-swipe-right="vm.toggleActivityDrawer()">
      <div ng-include="'app/views/partials/activities.html'"/>
    </md-sidenav>
    <!-- Right pop-out end -->

  </div>
</div>
